# React講座のメモ

## 目標
- Reactの基礎知識を得る
- Hooksを用いた記法で開発をすることができる
- Reactで簡単なチャットアプリを作ることができる

## 基礎知識
ReactはFacebook社が開発したUiライブラリで現在はOSS. UIを作るためのコンポーネント(見た目+機能)という概念が特徴的で, コンポーネントを組み合わせてwebの画面を作っていく.  
従来のHTMLでは, HTML(ツリー構造のドキュメント)を画面に描画する. ツリー構造を変更するときはDocument Object Model(DOM)からアクセスを行う. ただしDOMを直接変更してHTMLを再描画する処理はコストが高いという問題点がある. Reactでは仮想DOMと呼ばれる仕組みを用いてこの問題点を解決している. 仮想DOMでは, ブラウザのDOMツリーはJavaScriptのオブジェクトとして扱うことでブラウザに負荷をかけずにJavaScriptエンジンのメモリを使うことができ, 効率の良い再描画(レンダリング)を行うことがこのような仕組みの目標である. またDOMの状態をJavaScriptで管理することができる(=コンポーネント). レンダリングには差分描画という仕組みが用いられている. 従来のHTMLの場合, ツリー構造の1箇所が更新されると全体をレンダリングしていたが, 仮想DOMを用いると更新された箇所に関係する箇所のみを書き換えることでレンダリングの処理を軽量化している. 

## JSXの記法
JSXはJavaScriptの拡張言語を表す. HTMLライクな記法でJavaScriptの構文が使える, JSXは最終的にReact要素を生成するという特徴がある. JSXはコンパイル時にJSX記法で書いたものをReact.createElementの式に変換してReact要素を生成する. JSXの基本文法を次に示す. JSは基本的にキャメルケース(ex. className)で記述する. また変数を{value}のようにすることで出力できる. また最上位のコンポーネントは1つでないといけない(並列できない). このため最上位に<React.Fragment>や<>, <div>で囲む(どれも出力上はなかったことになる).
```jsx
import React from "react"; # Reactライブラリをインポートする
consta BlueButton = () => {
    return (
        <button className={"btn-blue"}>
            Click me!
        </button>
    )
}
```

## 環境構築
もっとも簡単にReactの環境を構築する方法はreact-create-appコマンドである. これによってシングルページアプリケーション(SPA):ページの再読み込みがない軽量なアプリケーションを作成できる. create-react-appに必要な環境は, Node.js 10.16以上, npm 5.6以上である. まず次に示すnpxコマンド(ネットワーク上のnpmコマンドを実行するもの)を実行する.
```
npx create-react-app [フォルダ名]
```

コマンドを実行すると開発環境が構築される. 作成されたディレクトリに移動するとreadme, src,  publicのディレクトリがあることがわかる. srcは開発用のファイルが格納される. ReactコンポーネントのJSXはsrcに配置する. puublicは静的ファイルやhtml, imageファイルを配置する. また後にbuildというディレクトリを用いる. buildは本番用のファイルが格納される. npm run buildコマンドで生成される. 

## 基本的なスクリプト
ここでは基本的なスクリプトとして3つのスクリプトについて説明する.
まず次に示すnpm startコマンドを用いるとローカルサーバーを起動してReactアプリを確認できる. これはホットリロード対応であるからアプリ実行中にソースコードが更新されると実行中のアプリも更新される. 
```
npm start
```

次にnpm run buildコマンドについて説明する. このコマンドを実行すると本番用のファイルを生成してbuildディレクトリに出力する. srcとpublicのファイルを1つにまとめるバンドルと呼ばれる操作を行う.
```
npm run build
```

最後にnpm run ejectコマンドについて説明する. このコマンドはBabelやWebpackの設定を変更したいときに用いるコマンドである.
```
npm run eject
```